### 비상 연락처 수정 API 상세 명세

#### **1. API 개요**

- **API 이름**: 비상 연락처 수정
- **HTTP 메서드**: `PUT`
- **엔드포인트**: `/api/v1/emergency-contacts/{contactId}`
- **설명**: 특정 비상 연락처의 정보를 수정합니다.

#### **2. 요청(Request)**

**경로 변수 (Path Variable)**:

| **키**       | **설명**       | **필수 여부** | **예시** |
|-------------|--------------|-----------|--------|
| `contactId` | 비상 연락처 고유 ID | ✅         | `45`   |

**요청 본문 (BODY)**:

| **필드명**        | **타입**  | **필수 여부** | **설명**                  | **제약 조건**    |
|----------------|---------|-----------|-------------------------|--------------|
| `resident_id`  | Integer | ✅         | 수정 대상 연락처가 속한 입주민 고유 ID | DB에 존재해야 함   |
| `contact_name` | String  | ✅         | 비상 연락 대상 이름             | 최대 100자      |
| `phone_number` | String  | ✅         | 비상 연락처 전화번호             | 최대 20자, 고유 값 |
| `notes`        | String  | ❌         | 추가 메모                   | 최대 255자      |

**헤더**:

| **키**        | **값**            | **설명**          |
|--------------|------------------|-----------------|
| Content-Type | application/json | 요청 본문 데이터 타입 지정 |

**요청 예시**:

``` http
PUT /api/v1/emergency-contacts/45 HTTP/1.1
Host: example.com
Content-Type: application/json

{
    "resident_id": 101,
    "contact_name": "김철수",
    "phone_number": "01098765432",
    "notes": "업데이트된 메모 내용"
}
```

#### **3. 응답(Response)**

**공통 응답 형식**:

### 성공 시:

``` json
{
    "code": "E2003",
    "message": "OK",
    "data": {
        "contact_id": 45,
        "resident_id": 101,
        "contact_name": "김철수",
        "phone_number": "01098765432",
        "notes": "업데이트된 메모 내용",
        "updated_at": "2025-06-09T16:00:00"
    }
}
```

### 실패 시:

``` json
{
    "code": "E4003",
    "message": "BAD_REQUEST",
    "errorMessage": "입력 데이터가 유효하지 않습니다."
}
```

**응답 코드 및 메시지**:

| **코드**    | **설명**                                  |
|-----------|-----------------------------------------|
| **E2003** | 수정 성공. 요청한 비상 연락처가 성공적으로 업데이트됨.         |
| **E4003** | 입력 데이터 오류. 필수 데이터 누락 또는 유효하지 않은 입력값 제공. |
| **E4040** | 데이터 없음. 해당 `contactId`를 찾을 수 없음.        |
| **E5000** | 서버 오류. 요청 데이터 처리 중 문제가 발생.              |

#### **4. 데이터 구조**

  | **필드명**        | **타입**   | **설명**            |
  |----------------|----------|-------------------|
  | `contact_id`   | Integer  | 비상 연락처 고유 ID      |
  | `resident_id`  | Integer  | 입주민 고유 ID         |
  | `contact_name` | String   | 비상 연락 대상 이름       |
  | `phone_number` | String   | 비상 연락처 전화번호       |
  | `notes`        | String   | 추가 메모 (`null` 가능) |
  | `updated_at`   | DateTime | 마지막으로 수정된 시간      |

#### **5. 유효성 검사 및 주요 고려 사항**

- **`contactId`**: 경로 변수로 제공되며, 반드시 유효한 비상 연락처 ID여야 합니다. 데이터베이스에 존재하지 않을 경우 수정이 실패합니다.
- **`resident_id`**: 요청 데이터가 수정 대상 연락처와 동일한 입주민의 ID인지 확인하여 데이터 무결성을 보장합니다.
- **`phone_number`**: 고유해야 하며, 다른 연락처와 중복될 경우 수정이 금지됩니다.
- **부분수정 지원**: 모든 필드를 반드시 수정할 필요는 없으며, 변경 필드만 포함할 수 있습니다.

#### **6. 사용 예시**

- **수정 대상 연락처**:

  | **연락처 ID** | **입주민 ID** | **이름** | **전화번호** | **메모** |
  |---------------|---------------|-----------|---------------|----------------|
  | 45 | 101 | 김철수 | 01012345678 | 환자 돌봄 책임자 |
- **수정 요청 데이터**:

``` json
  {
      "resident_id": 101,
      "contact_name": "김철수",
      "phone_number": "01098765432",
      "notes": "업데이트된 메모 내용"
  }
```

- **수정 후 결과**:
    
    | **연락처 ID** | **입주민 ID** | **이름** | **전화번호**    | **메모**      |
    |------------|------------|--------|-------------|-------------| 
    | 45         | 101        | 김철수    | 01098765432 | 업데이트된 메모 내용 |
